meta:
  environment: docker
  containers:
    - name: web-server
      build:
        context: ./server
        dockerfile: Dockerfile
      ports:
        - "3000:3000"
      volumes:
        - ./server/data.txt:/usr/src/app/data.txt
    - name: nginx
      build:
        context: ./nginx
        dockerfile: Dockerfile
      ports:
        - "8080:8080"
      volumes:
        - ./nginx/etc/nginx.conf:/etc/nginx/nginx.conf:ro
        - ./nginx/html:/var/www/public_html
      command: [nginx-debug, '-g', 'daemon off;']
depends_on:
  - web-server
